"use strict";(self.webpackChunkDCKlbIDCard=self.webpackChunkDCKlbIDCard||[]).push([[453],{8453:(J,u,a)=>{a.r(u),a.d(u,{UsersModule:()=>A});var p=a(6895),c=a(9585),_=a(4004),e=a(4650),f=a(1762);let h=(()=>{var t;class s{constructor(o){this.firestore=o,this.dbPath="/users",this.usersRef=o.collection(this.dbPath)}getAll(){return this.usersRef}getOne(o){return this.usersRef.doc(o)}update(o,l){return this.usersRef.doc(o).update(l)}delete(o){return this.usersRef.doc(o).delete()}}return(t=s).\u0275fac=function(o){return new(o||t)(e.LFG(f.ST))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),s})();var d=a(388),r=a(433);function U(t,s){1&t&&e._uU(0),2&t&&e.hij(" ",s.rowIndex+1," ")}function C(t,s){if(1&t&&(e._uU(0),e.ALo(1,"titlecase")),2&t){const n=s.row;e.hij(" ",e.lcZ(1,1,null==n?null:n.displayName)," ")}}function v(t,s){if(1&t&&e._uU(0),2&t){const n=s.row;e.hij(" ",null==n?null:n.email," ")}}function x(t,s){if(1&t&&e._uU(0),2&t){const n=s.row;e.hij(" ",null==n?null:n.role," ")}}function Z(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"div",12),e.NdJ("click",function(){const i=e.CHM(n).row,b=e.oxw(),y=e.MAs(18);return e.KtG(b.captureEdit(i,y))}),e._UZ(1,"i",13),e.qZA()}}function T(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"div",14)(1,"h4",15),e._uU(2,"Change role"),e.qZA(),e.TgZ(3,"button",16),e.NdJ("click",function(){e.CHM(n);const l=e.oxw();return e.KtG(l.modalRef.hide())}),e.TgZ(4,"span",17),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",18)(7,"div",19)(8,"div",20)(9,"div",3)(10,"form")(11,"div",21)(12,"label",22),e._uU(13,"Name"),e.qZA(),e.TgZ(14,"input",23),e.NdJ("ngModelChange",function(l){e.CHM(n);const i=e.oxw();return e.KtG(i.selUser.displayName=l)}),e.qZA()(),e.TgZ(15,"div",21)(16,"label",24),e._uU(17,"Email"),e.qZA(),e.TgZ(18,"input",25),e.NdJ("ngModelChange",function(l){e.CHM(n);const i=e.oxw();return e.KtG(i.selUser.email=l)}),e.qZA()(),e.TgZ(19,"div",21)(20,"label",26),e._uU(21,"Role"),e.qZA(),e.TgZ(22,"select",27),e.NdJ("ngModelChange",function(l){e.CHM(n);const i=e.oxw();return e.KtG(i.selUser.role=l)}),e._UZ(23,"option",28),e.TgZ(24,"option",29),e._uU(25,"admin"),e.qZA(),e.TgZ(26,"option",30),e._uU(27,"editor"),e.qZA(),e.TgZ(28,"option",31),e._uU(29,"user"),e.qZA()()()()()()()(),e.TgZ(30,"div",32)(31,"button",33),e.NdJ("click",function(){e.CHM(n);const l=e.oxw();return e.KtG(l.saveClick())}),e._uU(32,"Save"),e.qZA()()}if(2&t){const n=e.oxw();e.xp6(14),e.Q6J("ngModel",n.selUser.displayName),e.xp6(4),e.Q6J("ngModel",n.selUser.email),e.xp6(4),e.Q6J("ngModel",n.selUser.role)}}let g=(()=>{var t;class s{constructor(o,l){this.userService=o,this.modalService=l,this.ColumnMode=c.hq,this.message=""}ngOnInit(){this.retrieveUsers()}retrieveUsers(){this.userService.getAll().snapshotChanges().pipe((0,_.U)(o=>o.map(l=>({...l.payload.doc.data()})))).subscribe(o=>{this.rows=o})}captureEdit(o,l){this.modalRef=this.modalService.show(l),this.selUser=o}saveClick(){this.userService.update(this.selUser.uid,this.selUser).then(()=>this.message=`The role for ${this.selUser.displayName} is updated successfully.`).catch(o=>this.message=o),this.modalRef.hide()}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(h),e.Y36(d.tT))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-users"]],decls:19,vars:9,consts:[[1,"container"],[1,"card","col-md-12","mb-3",2,"margin-top","10px"],[1,"card-header"],[1,"card-body"],["rowHeight","auto",1,"bootstrap",3,"rows","columnMode","headerHeight","footerHeight","limit"],["name","#",3,"flexGrow"],["ngx-datatable-cell-template",""],["name","Name",3,"flexGrow"],["name","Email",3,"flexGrow"],["name","Role",3,"flexGrow"],["name","Change role","props","name"],["modalEdit",""],[1,"btn",3,"click"],[1,"fa","fa-edit"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"card"],[1,"card-block"],[1,"form-group"],["for","displayName"],["type","text","id","title","name","title","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["for","email"],["type","text","id","email","name","email","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["for","role"],["id","role","name","role",1,"form-select",3,"ngModel","ngModelChange"],["value",""],["value","admin"],["value","editor"],["value","user"],[1,"modal-footer"],[1,"btn","text-right",3,"click"]],template:function(o,l){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3," Users List "),e.qZA(),e.TgZ(4,"div",3)(5,"ngx-datatable",4)(6,"ngx-datatable-column",5),e.YNc(7,U,1,1,"ng-template",6),e.qZA(),e.TgZ(8,"ngx-datatable-column",7),e.YNc(9,C,2,3,"ng-template",6),e.qZA(),e.TgZ(10,"ngx-datatable-column",8),e.YNc(11,v,1,1,"ng-template",6),e.qZA(),e.TgZ(12,"ngx-datatable-column",9),e.YNc(13,x,1,1,"ng-template",6),e.qZA(),e.TgZ(14,"ngx-datatable-column",10),e.YNc(15,Z,2,0,"ng-template",6),e.qZA(),e._uU(16,"> "),e.qZA()()()(),e.YNc(17,T,33,3,"ng-template",null,11,e.W1O)),2&o&&(e.xp6(5),e.Q6J("rows",l.rows)("columnMode",l.ColumnMode.force)("headerHeight",50)("footerHeight",50)("limit",10),e.xp6(1),e.Q6J("flexGrow",.5),e.xp6(2),e.Q6J("flexGrow",2),e.xp6(2),e.Q6J("flexGrow",2),e.xp6(2),e.Q6J("flexGrow",2))},dependencies:[r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.On,r.F,c.nE,c.UC,c.vq,p.rS]}),s})();var m=a(2507);const M=[{path:"",component:g}];let w=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.Bz.forChild(M),m.Bz]}),s})(),A=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[d.tT],imports:[p.ez,w,r.u5,r.UX,m.Bz.forChild([{path:"",component:g}]),c.xD,d.zk]}),s})()}}]);