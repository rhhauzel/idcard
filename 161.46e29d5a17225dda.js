"use strict";(self.webpackChunkDCKlbIDCard=self.webpackChunkDCKlbIDCard||[]).push([[161],{1161:(G,u,l)=>{l.r(u),l.d(u,{IdPrintModule:()=>H});var p=l(6895),a=l(9585),y=l(1029),v=l(4633),h=l(4004),t=l(4650),S=l(3786),b=l(4795),g=l(388),w=l(8423);let D=(()=>{class n{constructor(){this._printStyle=[],this.previewOnly=!1,this.useExistingCss=!1,this.printDelay=0,this._styleSheetFile=""}set printStyle(e){for(let i in e)e.hasOwnProperty(i)&&this._printStyle.push((i+JSON.stringify(e[i])).replace(/['"]+/g,""));this.returnStyleValues()}returnStyleValues(){return`<style> ${this._printStyle.join(" ").replace(/,/g,";")} </style>`}set styleSheetFile(e){let i=function(s){return`<link rel="stylesheet" type="text/css" href="${s}">`};if(-1!==e.indexOf(",")){const s=e.split(",");for(let d of s)this._styleSheetFile=this._styleSheetFile+i(d)}else this._styleSheetFile=i(e)}returnStyleSheetLinkTags(){return this._styleSheetFile}getElementTag(e){const i=[],s=document.getElementsByTagName(e);for(let d=0;d<s.length;d++)i.push(s[d].outerHTML);return i.join("\r\n")}getFormData(e){for(var i=0;i<e.length;i++)e[i].defaultValue=e[i].value,e[i].checked&&(e[i].defaultChecked=!0)}getHtmlContents(){let e=document.getElementById(this.printSectionId),i=e.getElementsByTagName("input");this.getFormData(i);let s=e.getElementsByTagName("textarea");return this.getFormData(s),e.innerHTML}print(){let e,i,s="",d="";const r=this.getElementTag("base");this.useExistingCss&&(s=this.getElementTag("style"),d=this.getElementTag("link")),e=this.getHtmlContents(),i=window.open("","_blank","top=0,left=0,height=auto,width=auto"),i.document.open(),i.document.write(`\n      <html>\n        <head>\n          <title>${this.printTitle?this.printTitle:""}</title>\n          ${r}\n          ${this.returnStyleValues()}\n          ${this.returnStyleSheetLinkTags()}\n          ${s}\n          ${d}\n        </head>\n        <body>\n          ${e}\n          <script defer>\n            function triggerPrint(event) {\n              window.removeEventListener('load', triggerPrint, false);\n              ${this.previewOnly?"":`setTimeout(function() {\n                closeWindow(window.print());\n              }, ${this.printDelay});`}\n            }\n            function closeWindow(){\n                window.close();\n            }\n            window.addEventListener('load', triggerPrint, false);\n          <\/script>\n        </body>\n      </html>`),i.document.close()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["button","ngxPrint",""]],hostBindings:function(e,i){1&e&&t.NdJ("click",function(){return i.print()})},inputs:{previewOnly:"previewOnly",printSectionId:"printSectionId",printTitle:"printTitle",useExistingCss:"useExistingCss",printDelay:"printDelay",printStyle:"printStyle",styleSheetFile:"styleSheetFile"}}),n})(),T=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})();function _(n,o){1&n&&t._uU(0),2&n&&t.hij(" ",o.rowIndex+1," ")}function F(n,o){if(1&n&&(t._uU(0),t.ALo(1,"titlecase")),2&n){const e=o.row;t.hij(" ",t.lcZ(1,1,null==e?null:e.name)," ")}}function C(n,o){if(1&n&&t._uU(0),2&n){const e=o.row;t.hij(" ",null==e?null:e.desigName," ")}}function Z(n,o){if(1&n&&t._uU(0),2&n){const e=o.row;t.hij(" ",null==e?null:e.officeName," ")}}function P(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",13),t.NdJ("click",function(){const d=t.CHM(e).row,r=t.oxw(),c=t.MAs(20);return t.KtG(r.capturePrint(d,c))}),t._UZ(1,"i",14),t.qZA()}}const z=function(){return{position:"absolute",width:"97px",height:"111.5px",top:"104px",left:"73px","z-index":1}},N=function(n,o){return{"font-family":n,"font-size":o,"font-weight":"bold",position:"absolute",left:"5px",top:"225px","text-align":"center","z-index":2,width:"230px",display:"display",color:"#fff"}},A=function(n,o){return{"font-family":n,"font-weight":"bold","text-transform":"uppercase","font-size":o,position:"absolute",left:"5px",top:"245px","text-align":"center","z-index":3,width:"230px",color:"#fff"}},I=function(n,o){return{"font-family":n,"font-size":o,"font-weight":"bold",position:"absolute",left:"110px",top:"285px","z-index":4,"text-align":"left",color:"#fff"}},M=function(n,o){return{"font-family":n,"font-size":o,"font-weight":"bold",position:"absolute",left:"110px",top:"301px","z-index":5,"text-align":"left",color:"#fff"}},U=function(n,o){return{"font-family":n,"font-size":o,"font-weight":"bold",position:"absolute",left:"110px",top:"316px","z-index":6,"text-align":"left",color:"#fff"}},B=function(n,o){return{"font-family":n,"font-size":o,"font-weight":"bold",position:"absolute",left:"110px",top:"333px","z-index":7,"text-align":"left",color:"#fff"}},k=function(n,o){return{"font-family":n,"font-size":o,"font-weight":"bold",position:"absolute",left:"110px",top:"349px","z-index":5,"text-align":"left",color:"#fff"}},J=function(n,o){return{"font-family":n,"font-size":o,"font-weight":"bold",position:"absolute",left:"110px",top:"365px","z-index":8,"text-align":"left",color:"#fff"}},L=function(n,o){return{"font-family":n,"font-size":o,"font-weight":"bold",position:"absolute",width:"150px",height:"60px",left:"300px",top:"35px","z-index":9,color:"#fff"}},j=function(){return{position:"absolute",width:"100px",height:"40px",top:"112px",left:"320px","z-index":9}},Y=function(n,o){return{"font-family":n,"font-size":o,"font-weight":"bold",position:"absolute",width:"150px",height:"60px",left:"395px",top:"370px","z-index":9,color:"#fff"}};function E(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",15)(1,"h4",16),t._uU(2,"Print"),t.qZA(),t.TgZ(3,"button",17),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.modalRef.hide())}),t.TgZ(4,"span",18),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",19)(7,"div",20)(8,"div",21)(9,"div",22)(10,"table")(11,"tr")(12,"td")(13,"div",23)(14,"div"),t._UZ(15,"img",24),t.qZA(),t.TgZ(16,"div",25),t._uU(17),t.qZA(),t.TgZ(18,"div",26),t._uU(19),t.qZA(),t.TgZ(20,"div",27),t._uU(21),t.qZA(),t.TgZ(22,"div",28),t._uU(23),t.qZA(),t.TgZ(24,"div",29),t._uU(25),t.ALo(26,"date"),t.qZA(),t.TgZ(27,"div",30),t._uU(28),t.qZA(),t.TgZ(29,"div",31),t._uU(30),t.qZA(),t.TgZ(31,"div",32),t._uU(32),t.qZA()()(),t.TgZ(33,"td")(34,"div",33)(35,"div",34),t._uU(36),t.qZA(),t.TgZ(37,"div"),t._UZ(38,"img",35),t.qZA(),t.TgZ(39,"div",36),t._uU(40),t.ALo(41,"date"),t.qZA()()()()()()()()(),t.TgZ(42,"div",37)(43,"button",38),t._uU(44,"Print"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(15),t.Q6J("ngStyle",t.DdM(31,z))("src",e.idData.photoURL,t.LSH),t.xp6(1),t.Q6J("ngStyle",t.WLB(32,N,e.idNameFont,e.idNameSize)),t.xp6(1),t.hij(" ",e.idData.name,""),t.xp6(1),t.Q6J("ngStyle",t.WLB(35,A,e.desFont,e.desFontSize)),t.xp6(1),t.hij(" ",e.idData.desigName,""),t.xp6(1),t.Q6J("ngStyle",t.WLB(38,I,e.idFont,e.idFontSize)),t.xp6(1),t.hij(" ",e.idData.idNo,""),t.xp6(1),t.Q6J("ngStyle",t.WLB(41,M,e.idFont,e.idFontSize)),t.xp6(1),t.hij(" ",e.idData.gender,""),t.xp6(1),t.Q6J("ngStyle",t.WLB(44,U,e.idFont,e.idFontSize)),t.xp6(1),t.hij(" ",t.xi3(26,25,e.idDoBText,"dd.MM.yyyy"),""),t.xp6(2),t.Q6J("ngStyle",t.WLB(47,B,e.idFont,e.idFontSize)),t.xp6(1),t.hij(" ",e.idData.contactno,""),t.xp6(1),t.Q6J("ngStyle",t.WLB(50,k,e.idFont,e.idFontSize)),t.xp6(1),t.hij(" ",e.idData.bloodgroup,""),t.xp6(1),t.Q6J("ngStyle",t.WLB(53,J,e.idFont,e.idFontSize)),t.xp6(1),t.hij(" ",e.idData.idmark,""),t.xp6(3),t.Q6J("ngStyle",t.WLB(56,L,e.idFont,e.idFontSize)),t.xp6(1),t.hij(" ",e.idAddressText,""),t.xp6(2),t.Q6J("ngStyle",t.DdM(59,j))("src",e.idData.signURL,t.LSH),t.xp6(1),t.Q6J("ngStyle",t.WLB(60,Y,e.idFont,e.idFontSize)),t.xp6(1),t.hij(" ",t.xi3(41,28,e.issueDt,"dd.MM.yyyy"),""),t.xp6(3),t.Q6J("useExistingCss",!0)}}let x=(()=>{var n;class o{constructor(i,s,d,r){this.idCardService=i,this.settingService=s,this.modalService=d,this.ngxSpinner=r,this.ColumnMode=a.hq,this.hidden={0:"hidden",1:"visible"},this.modalConfig={class:"modal-lg"},this.message="",this.idData={idNo:"",name:"",officeID:"",officeName:"",deptID:"",deptName:"",distID:"",distName:"",desigID:"",desigName:"",address:"",gender:"",dob:0,dos:0,bloodgroup:"",idmark:"",contactno:"",photoURL:"",signURL:"",enteredBy:"",enteredDate:0,isApproved:!1,approvedBy:"",approvedDate:0,isPrinted:!1,printedBy:"",printedDate:0},this.user=JSON.parse(localStorage.getItem("user"))}ngOnInit(){this.retrieveData(),this.retrieveSettings(),this.issueDt=Date.now()}retrieveSettings(){this.settingService.getAllID().snapshotChanges().subscribe(i=>{i.forEach(s=>{this.settingService.get(s.payload.doc.id).snapshotChanges().pipe((0,h.U)(d=>({id:d.payload.id,...d.payload.data()}))).subscribe(d=>{this.idFont=d.idFont,this.idFontSize=d.idFontSize+"px",this.idFontidX=d.idX+"px",this.idFontidY=d.idY+"px",this.photoX=d.photoX+"px",this.photoY=d.photoY+"px",this.idNameFont=d.nameFont,this.idNameSize=d.nameFontSize+"px",this.idNameX=d.nameX+"px",this.idNameY=d.nameY+"px",this.desFont=d.desFont,this.desFontSize=d.desFontSize+"px",this.desX=d.desX+"px",this.desY=d.desY+"px",this.dobX=d.idX+"px";var c=+(d.idY?d.idY:"0");this.dobY=this.addValue(c,4)+"px",this.dosX=d.idX+"px",this.dosY=this.addValue(c,8)+"px"})})})}addValue(i,s){return i+s}retrieveData(){this.idCardService.getForPrint(v.d.name,y.d.asc).snapshotChanges().pipe((0,h.U)(i=>i.map(s=>({id:s.payload.doc.id,...s.payload.doc.data()})))).subscribe(i=>{this.rows=i})}capturePrint(i,s){this.selRow=i.id,this.idData=i,this.idDoBText=new Date(1e3*i.dob.seconds+i.dob.nanoseconds/1e6),this.idDoSText=new Date(1e3*i.dos.seconds+i.dos.nanoseconds/1e6);let d=i.address.split(",");console.log(d.length),this.idAddressText=i.address.replaceAll(",",",\n"),this.modalRef=this.modalService.show(s,this.modalConfig)}btnPrint(){}captureNo(){}}return(n=o).\u0275fac=function(i){return new(i||n)(t.Y36(S.k),t.Y36(b.g),t.Y36(g.tT),t.Y36(w.t2))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-id-print"]],decls:21,vars:12,consts:[[1,"container"],[1,"card","col-md-12","mb-3",2,"margin-top","10px"],[1,"card-header"],[1,"d-flex","justify-content-between"],[1,"card-body"],["rowHeight","auto",1,"bootstrap",3,"rows","columnMode","headerHeight","footerHeight","limit"],["name","#",3,"flexGrow","maxWidth"],["ngx-datatable-cell-template",""],["name","Name",3,"flexGrow"],["name","Designation",3,"flexGrow"],["name","Office",3,"flexGrow"],["name","Action","props","name",3,"flexGrow","maxWidth"],["modalPrint",""],[1,"btn",3,"click"],[1,"fa","fa-check"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"card"],[1,"card-block"],["id","printPage",1,"card-body","row"],["id","front",1,"col-lg-6","p-2"],["id","photo",3,"ngStyle","src"],["id","idName",3,"ngStyle"],["id","idDesig",3,"ngStyle"],["id","idNo",3,"ngStyle"],["id","idGender",3,"ngStyle"],["id","idDob",3,"ngStyle"],["id","idContact",3,"ngStyle"],["id","idBloodGroup",3,"ngStyle"],["id","idMark",3,"ngStyle"],["id","back",1,"col-lg-6"],["id","idAddress",3,"ngStyle"],["id","signature",3,"ngStyle","src"],["id","idIssueDt",3,"ngStyle"],[1,"modal-footer"],["styleSheetFile","node_modules/bootstrap/dist/css/bootstrap.css","printSectionId","printPage","ngxPrint","",1,"btn","btn-info","m-1",3,"useExistingCss"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div"),t._uU(5,"Print ID"),t.qZA()()(),t.TgZ(6,"div",4)(7,"ngx-datatable",5)(8,"ngx-datatable-column",6),t.YNc(9,_,1,1,"ng-template",7),t.qZA(),t.TgZ(10,"ngx-datatable-column",8),t.YNc(11,F,2,3,"ng-template",7),t.qZA(),t.TgZ(12,"ngx-datatable-column",9),t.YNc(13,C,1,1,"ng-template",7),t.qZA(),t.TgZ(14,"ngx-datatable-column",10),t.YNc(15,Z,1,1,"ng-template",7),t.qZA(),t.TgZ(16,"ngx-datatable-column",11),t.YNc(17,P,2,0,"ng-template",7),t.qZA(),t._uU(18,"> "),t.qZA()()()(),t.YNc(19,E,45,63,"ng-template",null,12,t.W1O)),2&i&&(t.xp6(7),t.Q6J("rows",s.rows)("columnMode",s.ColumnMode.force)("headerHeight",50)("footerHeight",50)("limit",10),t.xp6(1),t.Q6J("flexGrow",.5)("maxWidth",50),t.xp6(2),t.Q6J("flexGrow",3),t.xp6(2),t.Q6J("flexGrow",2),t.xp6(2),t.Q6J("flexGrow",2),t.xp6(2),t.Q6J("flexGrow",1)("maxWidth",120))},dependencies:[p.PC,a.nE,a.UC,a.vq,D,p.rS,p.uU],styles:["#front[_ngcontent-%COMP%]{width:252px;height:396px;border:1px solid black;background-image:url(ID\\ Front.f360e1c9f234ba3d.jpg);background-position:center;background-repeat:no-repeat;background-size:cover}#back[_ngcontent-%COMP%]{width:252px;height:396px;border:1px solid black;background-image:url(ID\\ Back.742210bc9b0c3142.jpg);background-position:center;background-repeat:no-repeat;background-size:cover}#head[_ngcontent-%COMP%]{text-align:center}#printArea[_ngcontent-%COMP%]{width:500px}"]}),o})();var f=l(2507);const Q=[{path:"",component:x}];let W=(()=>{var n;class o{}return(n=o).\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.Bz.forChild(Q),f.Bz]}),o})();var m=l(433);let H=(()=>{var n;class o{}return(n=o).\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[g.tT],imports:[p.ez,W,m.u5,m.UX,f.Bz.forChild([{path:"",component:x}]),a.xD,g.zk,T]}),o})()}}]);