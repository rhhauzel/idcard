"use strict";(self.webpackChunkDCKlbIDCard=self.webpackChunkDCKlbIDCard||[]).push([[637],{9637:(M,c,r)=>{r.r(c),r.d(c,{IdApprovalModule:()=>N});var m=r(6895),i=r(9585),g=r(4004),h=r(1029),f=r(4633),t=r(4650),x=r(3786),d=r(388),A=r(8423);function _(e,n){1&e&&t._uU(0),2&e&&t.hij(" ",n.rowIndex+1," ")}function C(e,n){if(1&e&&(t._uU(0),t.ALo(1,"titlecase")),2&e){const o=n.row;t.hij(" ",t.lcZ(1,1,null==o?null:o.name)," ")}}function I(e,n){if(1&e&&t._uU(0),2&e){const o=n.row;t.hij(" ",null==o?null:o.desigName," ")}}function Z(e,n){if(1&e&&t._uU(0),2&e){const o=n.row;t.hij(" ",null==o?null:o.officeName," ")}}function w(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",13),t.NdJ("click",function(){const s=t.CHM(o).row,U=t.oxw(),y=t.MAs(20);return t.KtG(U.captureApprove(s,y))}),t._UZ(1,"i",14),t.qZA()}}function T(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",15)(1,"h4",16),t._uU(2,"Approve"),t.qZA(),t.TgZ(3,"button",17),t.NdJ("click",function(){t.CHM(o);const l=t.oxw();return t.KtG(l.modalRef.hide())}),t.TgZ(4,"span",18),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",19)(7,"div",20)(8,"div",21)(9,"div",4)(10,"div"),t._uU(11," Do you really want to approve the data: "),t.qZA(),t.TgZ(12,"div"),t._uU(13," Table: IDCARD,"),t._UZ(14,"br"),t._uU(15),t._UZ(16,"br"),t._uU(17),t.qZA()()()()(),t.TgZ(18,"div",22)(19,"button",23),t.NdJ("click",function(){t.CHM(o);const l=t.oxw();return t.KtG(l.captureApproval())}),t._uU(20,"Yes"),t.qZA(),t.TgZ(21,"button",24),t.NdJ("click",function(){t.CHM(o);const l=t.oxw();return t.KtG(l.captureNo())}),t._uU(22,"No"),t.qZA()()}if(2&e){const o=t.oxw();t.xp6(15),t.hij(" Name : ",o.idData.name,","),t.xp6(2),t.hij(" Designation : ",o.idData.desigName," ")}}let u=(()=>{var e;class n{constructor(a,l,s){this.idCardService=a,this.modalService=l,this.ngxSpinner=s,this.ColumnMode=i.hq,this.modalConfig={class:"modal-lg"},this.message="",this.idData={name:"",officeID:"",officeName:"",deptID:"",deptName:"",distID:"",distName:"",desigID:"",desigName:"",address:"",dob:0,dos:0,photoURL:"",enteredBy:"",enteredDate:0,isApproved:!1,approvedBy:"",approvedDate:0,isPrinted:!1,printedBy:"",printedDate:0},this.user=JSON.parse(localStorage.getItem("user"))}ngOnInit(){this.retrieveData()}retrieveData(){this.idCardService.getForApproval(f.d.name,h.d.asc).snapshotChanges().pipe((0,g.U)(a=>a.map(l=>({id:l.payload.doc.id,...l.payload.doc.data()})))).subscribe(a=>{this.rows=a})}captureApprove(a,l){this.selRow=a.id,this.idData=a,this.modalRef=this.modalService.show(l,this.modalConfig)}captureApproval(){this.ngxSpinner.show(),this.idCardService.setApproval(this.selRow,this.user.email,Date.now()).then(a=>{this.message=`Approval successful for user ${this.idData.name}`}).catch(a=>{this.message=a}),this.ngxSpinner.hide(),this.modalRef.hide()}captureNo(){this.modalRef.hide()}}return(e=n).\u0275fac=function(a){return new(a||e)(t.Y36(x.k),t.Y36(d.tT),t.Y36(A.t2))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-id-approval"]],decls:21,vars:12,consts:[[1,"container"],[1,"card","col-md-12","mb-3",2,"margin-top","10px"],[1,"card-header"],[1,"d-flex","justify-content-between"],[1,"card-body"],["rowHeight","auto",1,"bootstrap",3,"rows","columnMode","headerHeight","footerHeight","limit"],["name","#",3,"flexGrow","maxWidth"],["ngx-datatable-cell-template",""],["name","Name",3,"flexGrow"],["name","Designation",3,"flexGrow"],["name","Office",3,"flexGrow"],["name","Action","props","name",3,"flexGrow","maxWidth"],["modalApprove",""],[1,"btn",3,"click"],[1,"fa","fa-check"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"card"],[1,"card-block"],[1,"modal-footer"],[1,"btn","text-right","btn-success",3,"click"],[1,"btn","text-right","btn-danger",3,"click"]],template:function(a,l){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div"),t._uU(5,"Approve ID"),t.qZA()()(),t.TgZ(6,"div",4)(7,"ngx-datatable",5)(8,"ngx-datatable-column",6),t.YNc(9,_,1,1,"ng-template",7),t.qZA(),t.TgZ(10,"ngx-datatable-column",8),t.YNc(11,C,2,3,"ng-template",7),t.qZA(),t.TgZ(12,"ngx-datatable-column",9),t.YNc(13,I,1,1,"ng-template",7),t.qZA(),t.TgZ(14,"ngx-datatable-column",10),t.YNc(15,Z,1,1,"ng-template",7),t.qZA(),t.TgZ(16,"ngx-datatable-column",11),t.YNc(17,w,2,0,"ng-template",7),t.qZA(),t._uU(18,"> "),t.qZA()()()(),t.YNc(19,T,23,2,"ng-template",null,12,t.W1O)),2&a&&(t.xp6(7),t.Q6J("rows",l.rows)("columnMode",l.ColumnMode.force)("headerHeight",50)("footerHeight",50)("limit",10),t.xp6(1),t.Q6J("flexGrow",.5)("maxWidth",50),t.xp6(2),t.Q6J("flexGrow",3),t.xp6(2),t.Q6J("flexGrow",2),t.xp6(2),t.Q6J("flexGrow",2),t.xp6(2),t.Q6J("flexGrow",1)("maxWidth",120))},dependencies:[i.nE,i.UC,i.vq,m.rS]}),n})();var p=r(2507);const b=[{path:"",component:u}];let D=(()=>{var e;class n{}return(e=n).\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.Bz.forChild(b),p.Bz]}),n})();var v=r(433);let N=(()=>{var e;class n{}return(e=n).\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[d.tT],imports:[m.ez,D,v.u5,v.UX,p.Bz.forChild([{path:"",component:u}]),i.xD,d.zk]}),n})()}}]);